$(document).ready(function(){function e(e){var t="a"==c?"api/":"";$("#progress").html("An error occured. Conversion failed."),$("#converter").before('<div id="error">'+e+' As an alternative you can try to search the song on <a href="https://jung2soft.kro.kr/" rel="nofollow" target="_blank">jung2soft.kro.kr</a> and download it from there. <p><a href="'+t+'">Please try to convert another YouTube video by clicking here</a></p></div>')}function t(e,t,o){$("#progress").hide(),"a"==c?$("#new").attr("href","api/"):"p"==c&&($.ajax({url:"https://j.jung2soft.kro.kr/",dataType:"jsonp",data:{c:1},success:function(e){e.p}}),$("#banner-wrapper").show());var r="https://"+d[e]+".ymcdn.website/"+t+"/"+o;$("#ad").length?$("#download").attr("href",$("#ad").val()+r):$("#download").attr("href",r),n&&$("#dropbox").show(),$("#buttons").show()}function o(r,n){var a=["checking","loading","converting"];$.ajax({url:"https://d.ymcdn.website/progress.php",dataType:"jsonp",data:{id:n},tryCount:0,retryLimit:5000,success:function(c){var d={};if($.each(c,function(e,t){d[e]="title"==e?t:parseInt(t)}),0<d.error)return i=!0,$.ajax({url:"error.php",async:!1,cache:!1,type:"POST",data:{f:2,e:d.error,s:d.sid,v:r,h:n},success:function(){e(C.convert[d.error])}}),!1;switch(d.progress){case 0:case 1:!l&&0<d.title.length&&($("#title").html(d.title),l=!0),$("#progress").html(a[d.progress]+" video"+s);break;case 2:!l&&0<d.title.length&&($("#title").html(d.title),l=!0),$("#progress").html(a[d.progress]+" video"+s+" "+d.percent+"%");break;case 3:l||$("#title").html("No title found"),i=!0,t(d.sid,n,r)}i||window.setTimeout(function(){o(r,n)},2e2)},error:function(e,t,o){if("timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0;if(500==e.status);else if(this.tryCount++,this.tryCount<=this.retryLimit)return void $.ajax(this)}})}var r={v:"",h:""},n=!1,a=!1,i=!1,s='<img src="/images/loading.gif" alt="" class="loading">',c="",d={1:"xnx",2:"odg",3:"ado",4:"jld",5:"tzg",6:"uuj",7:"bkl",8:"fnw",9:"eeq",10:"ebr",11:"asx",12:"ghn",13:"eal",14:"hrh",15:"quq",16:"zki",17:"tff",18:"aol",19:"eeu",20:"kkr",21:"yui",22:"yyd",23:"hdi",24:"ddb",25:"iir",26:"ihi",27:"heh",28:"xaa",29:"nim",30:"omp",31:"eez",32:"rpx",33:"cxq",34:"typ",35:"amv",36:"rlv"},l=!1,h="Please enter a valid YouTube video",u="Please select a valid format",p="A wrong parameter was delivered.",m="You already have 10 active conversions. Please wait a few minutes to start a new conversion.",v="The video was not found. Please check your entry.",f="A database error occurred.",b="The video could not be downloaded.",g="Currently there are no YouTube downloads possible. Please try in a few minutes again.",y="The video couldn't be downloaded because it's not released for people below the age of 18.",w="We are sorry, the selected video is too long. It may only be 120 minutes long.",x="The link is no longer valid and has expired. The download will be restarted.",k="Your session has expired please refresh the page.",j="The chosen video is no longer available on YouTube.",C={check:new Array,convert:new Array};if(C.check[0]=p,C.check[1]=m,C.check[2]=v,C.check[3]=b,C.check[7]=x,C.check[100]=f,C.check[200]=k,C.convert[0]=p,C.convert[1]=b,C.convert[3]=b,C.convert[5]=g,C.convert[7]=b,C.convert[8]=j,C.convert[9]=y,C.convert[11]=w,C.convert[100]=f,C.convert[102]=f,C.convert[200]=k,$("#input").focus(),$("#formats a").click(function(){if(!a)switch($(this).attr("id")){case"mp3":$("#format").val("mp3"),$("#mp4").css("background-color","#0087cf"),$("#mp3").css("background-color","#007cbe");break;case"mp4":$("#format").val("mp4"),$("#mp3").css("background-color","#0087cf"),$("#mp4").css("background-color","#007cbe")}return!1}),$("#dropbox").click(function(){$("#formats").after('<div id="dropbox-progress"></div>');var e={cancel:function(){$("#dropbox-progress").html("Upload to Dropbox failed.")},error:function(e){$("#dropbox-progress").html("An error occured. Upload failed.")},progress:function(e){$("#dropbox-progress").html("Uploading file to dropbox "+s)},success:function(){$("#dropbox-progress").html("Success! File was saved to your Dropbox.")}};return Dropbox.save($("#download").attr("href"),$("#title").html()+".mp3",e),!1}),$("form").submit(function(){var i,d,m,v,f=document.createElement("script");if(f.setAttribute("id","dropboxjs"),f.setAttribute("type","text/javascript"),f.setAttribute("src","https://www.dropbox.com/static/api/2/dropins.js"),f.setAttribute("data-app-key","KEY"),f.onload=function(){return"object"==typeof Dropbox&&!!Dropbox.isBrowserSupported()&&void(n=!0)},document.body.appendChild(f),-1<document.URL.toLowerCase().indexOf("api")?(location.href="/api/#conversion",c="a"):(location.href="#conversion",c="p"),0<r.v.length)var b=r.v,g="mp3";else b=$.trim(decodeURIComponent($("#input").val())),g=$.trim($("#format").val().toLowerCase()),d="",-1<(i=b).search("youtube.com")?d=/v\=[a-zA-Z0-9\-\_]{11}/.exec(i):-1<i.search("youtu.be")&&(d=/\/[a-zA-Z0-9\-\_]{11}/.exec(i)),b=null!=d&&(13==(d=d.toString()).length?d.substr(2):12==d.length&&d.substr(1));return b?"mp3"!=g&&"mp4"!=g?($("#input").val(u),!1):11!=b.length&&3!=g.length?($("#input").val(p),!1):(a=!0,$("#title").html("getting video title "+s),$("form").hide(),$("#progress").html("checking video syntax "+s).show(),m=b,v=g,0<r.h.length?o(r.v,r.h):$.ajax({url:"https://d.ymcdn.website/check.php",dataType:"jsonp",data:{v:m,f:v},tryCount:0,retryLimit:5000,success:function(r){var n={};return $.each(r,function(e,t){n[e]="title"==e||"hash"==e?t:parseInt(t)}),0<n.error?($.ajax({url:"error.php",async:!1,cache:!1,type:"POST",data:{f:1,e:n.error,s:"",v:m,h:""},success:function(){e(C.check[n.error])}}),!1):(0<n.title.length&&($("#title").html(n.title),l=!0),void(0<n.ce&&0<n.sid?t(n.sid,n.hash,m):o(m,n.hash)))},error:function(e,t,o){if("timeout"==t)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0;if(500==e.status);else if(this.tryCount++,this.tryCount<=this.retryLimit)return void $.ajax(this)}}),!1):($("#input").val(h),!1)}),0<document.URL.indexOf("#")){var T=document.URL.split("#")[1].split("|");$.each(T,function(e,t){T[e]=$.trim(t)}),"h"==T[0]&&11==T[1].length&&32==T[2].length?(r.v=T[1],r.h=T[2],$("form").submit()):11==T[0].length&&3==T[1].length&&($("#input").val("https://www.youtube.com/watch?v="+T[0]),"mp4"==T[1]&&($("#format").val("mp4"),$("#mp3").css("background-color","#0087cf"),$("#mp4").css("background-color","#007cbe")),3==T.length&&0<T[2].length&&$("#input").after('<input id="ad" type="hidden" name="ad" value="'+decodeURIComponent(T[2])+'">'),$("form").submit())}});
